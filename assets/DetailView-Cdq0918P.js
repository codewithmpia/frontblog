import{l as M,m as T,r as u,o as O,w as P,c as r,e as c,f as e,g as B,u as t,t as a,i as p,h as L,n as j,p as g,v as w,F as _,j as X,a as C}from"./index-WI-smavh.js";import{f as k,H as S}from"./utils-CuQyoUPz.js";import{a as U,_ as V}from"./Alerts-DM2eUFvW.js";const q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAMAAADxhdbJAAAAA3NCSVQICAjb4U/gAAABv1BMVEX+/v79/v79/f78/f78/P77/P77/P37+/37+/z6+/z6+/v5+/v6+vv5+vv4+vv4+fv4+fr3+Pr3+Pn29/n29/j19/j19vj19vf19ff09ff09fbz9fbz9PXy9PXy8/Xx8/Tx8vTw8vTw8vPw8fPv8fPv8fLv8PLu8PLu7/Ht7/Ht7vDt7u/s7e/r7e7r7O7q7O7q7O3p6+3o6uzo6evn6evn6Ovm6Ovm6Orl5+nk5ujj5ujj5efi5ebi5Ofi5Obh5Obh4+bg4+Xf4uTf4eTe4eTe4OPd4OPd4OLc3uHc3uDb3uDa3d/a3N/Z3N7Z297Y293X293Y2t3X2t3X2tzW2dzW2dvV2dvV2NvV19vU19rT1tnS1tnS1dnS1djS1dfR1NfQ1NbQ09bQ0tbP0tXO0tXO0dXO0dTN0dTN0NTM0NPM0NLMz9LLztLLztHKztHKzdHJzdDJzNDIzNDIzM/HzM/Hy87Hys7Gys7Gys3Fys3Fyc3FyczEyMzEx8zEx8vDx8vDx8rCx8rCxsrCxsnCxcrCxcnBxcnAxcnAxMnAxMi/xMi/xMe/w8e+w8e+wse+wsa9wsa9wsW9wcW8wcW8wcShBKa0AAAEjUlEQVR42u3Y/18URRzH8c25nb2pPrecIAqK4rdEO+0w/BZJmWlqmYUmYZaRlKKmhGKKJd3bbnBvF3cH/IMr+kL6YLk5Ztif7vUPPB/zucfM7I0jM82R/9TkmlyT+7Mm1+SaXCM9AYBqFhwkIIMwDGsZrA4yknGM+z+O3bh9fwpSAsCqcQjCi5eHDuxob9tzcODUhW/vIlJJKIFV4RA+LBc7OeOCSIjXqLi+u/zexfFAhYB9DvLhG2tI0H8JwRnjraUzt6MIsMsBUH2v+PRSBRIuKx4cjQJY5CDjOLhWFLRkgtGBn5/BGodIXjq0o53SYxtHEtjigrGSx7ig9HzecimBJW6il5FPy1YQ/kgMGxxmL7dR/bwN92qwwMnftuc0OJ+VA2nOQZ1lPunEBhXMuXCvS1p5XY8sDLN6RJBWBfaRgimH+DAjvbzNv5qvrrKFk2b8QgIzDuH4WkGa5cqhKTc7StqJ1okazLhkmBPpT1MZcupCAxx7JzHlPmuA47ulNOTON8B5nVMzhtxQA5xoHQ9hxCVf5xvg1t4x5KJrpJ9oG6+ZccHkOkG65TsfBFWzQ+z3HZx041srxkd0HyPd3LdqVUNOncmRbmxAwZCLvift+LlEk0vv8WaP9BL+rdCQqwbPD2nfr1vuPTW9766WOoX2Ll/XX6sacVGvI0g7vjBOk99ul0cNVBwz47Cdk368x/TTqKcRjn04BxMOcT8j/cTIrBk3e1WQdt7GKdNhBvtc0s0tm25zJEMe6cbeT0y58GaLIM34eWV8Zla2ctJLFO+EphzUu8wnrdxSIKUpF42SZnwwgTaX7vXqLY93V6S0wI21uFQ3v837IoYJt3gJne3y6mj5jddHbT1Shc9L9daX26siS5ysxAOsQMvGTiQVWxzi+v/yRiKYcos92uTV+UyZtvmeqY4tuxkKrF/BIlf7qVXoXnTmnERyglF67h7bT9/T3R6llh9OYJWrzB1mfvp70bTl1SHpS+f4Ttjm4v2MUrld0jYX7sulcz22OTmzx81ydcFOns5tewJY5AA1sUEs855yc17CGocwHOwQlJ5oP/7Y2hGNeKLMBS2XYN3fPYMVrhJfaWdUJ5/7X81VjDlAzl8vcp/qeqL4zbyswIQDAiU/bc9rvgSchAqAFXKAjNT909u4IL2E2316Mokl0DBXBUIlR/s7GCf9OFt/+PK0iiTQCAcESXTnVM+rTFBjCeZ1fzAWqADQ5AAZJw8Gy2tznFaSx/w3P5mMlxyqs5T1aLivg+cErTjXXd83/MviUFM4IFSVK/1dHku19Ie65dgPUgVACgfMqPDG8a155pGNPEa7P747+8JQnUUsUlPnSj7jZC/utu4fWhjqixxkHF4/2sldQXYTzOs6elUqif9xiIIrvT7LU0rGQx2UEf7lIOORksi9XqDVqUDc7bmm8DeHAP3CpdXNbTmb4C8OTx/vZbTa+YKfmcXCMMvMpwziX8ZwoE5mo1G+YzJwwltFQZnkrxlQjjrCfMomb9OUM9mZp6wSg87ngjKLl523OWWWaHU2Ccou4VCmNTmL/QGc+sc78dP0eQAAAABJRU5ErkJggg==",H={class:"w-full max-w-4xl px-6 mx-auto"},D={class:"w-full flex items-center gap-6 uppercase text-sm mt-6"},F={class:"w-full my-12"},I={class:"max-w-4xl px-6 mx-auto"},N={key:0},J={class:"w-full flex flex-col gap-10"},Q=["src","alt"],G={class:"my-10"},K={class:"text-xl font-semibold py-2.5"},W={class:"w-full mb-3"},Y=e("label",{for:"name",class:"block uppercase font-medium mb-2"},"Votre nom",-1),R={key:0,class:"text-red-600"},E={class:"w-full mb-3"},Z=e("label",{for:"message",class:"block uppercase font-medium mb-2"},"Votre message",-1),$={key:0,class:"text-red-600"},ee=e("button",{type:"submit",class:"bg-blue-600 text-white font-medium py-2.5 px-4 rounded shadow-sm hover:filter hover:brightness-110 cursor-pointer"},"Soumettre",-1),se={class:"w-full flex flex-col gap-6 my-20"},te={class:"w-full flex items-center gap-3"},ae=["alt"],oe={class:"flex flex-col gap-0.5"},le={class:"text-lg font-semibold"},ne={class:"my-3"},me={__name:"DetailView",setup(re){const s=M(),v=T(),i=u(""),m=u(""),h=u(""),x=u(""),f=u(!1),n=u({});O(async()=>{(!s.post.slug||s.post.slug!==v.params.slug)&&await s.fetchPost(v.params.slug)});const b=()=>{f.value=!1},A=()=>{i.value="",m.value=""},y=()=>{n.value={};let o=!0;return i.value||(n.value.name="Le nom est requis.",o=!1),m.value||(n.value.message="Le message est requis.",o=!1),o},z=async()=>{if(y())try{const o=await C.post(`https://mpiadev.pythonanywhere.com/api/posts/${v.params.slug}`,{name:i.value,message:m.value});o.status===200?(h.value="success",x.value=o.data.message,f.value=!0,A(),await s.fetchPost(v.params.slug)):(f.value=!0,x.value="Une erreur s'est produite")}catch(o){console.log(o)}};return P(()=>s.post.comments,(o,d)=>{s.post.comments=o}),(o,d)=>(r(),c(_,null,[e("section",null,[B(U,{title:t(s).post.title},null,8,["title"]),e("div",H,[e("div",null,a(t(s).post.resume),1),e("div",D,[e("span",null,a(t(k)(t(s).post.created_at)),1),e("span",null,a(t(s).post.author),1),e("span",null,a(t(s).post.views)+" vues",1),e("span",null,a(t(s).post.comments.length)+" Commentaires",1)])])]),e("section",F,[e("div",I,[t(s).isLoading?(r(),c("div",N,"Chargement...")):p("",!0),e("div",J,[e("img",{src:t(s).post.image_url,alt:t(s).post.slug,class:"w-full h-64 object-cover rounded-2xl shadow-md"},null,8,Q),e("div",null,a(t(s).post.content),1)]),e("div",G,[e("h3",K,a(t(s).post.comments.length)+" Commentaires",1),f.value?(r(),L(V,{key:0,category:h.value,text:x.value,action:b},null,8,["category","text"])):p("",!0),e("form",{onSubmit:j(z,["prevent"]),class:"my-6"},[e("div",W,[Y,g(e("input",{type:"text",name:"name",id:"name","onUpdate:modelValue":d[0]||(d[0]=l=>i.value=l),class:"w-full md:w-2/4 min-h-12 outline-none border border-solid border-gray-300 py-2.5 px-4 rounded focus:border-blue-600 focus:shadow-[0_0_0_3px_#4869ee3f]",required:""},null,512),[[w,i.value]]),n.value.name?(r(),c("span",R,a(n.value.name),1)):p("",!0)]),e("div",E,[Z,g(e("textarea",{name:"message",id:"message","onUpdate:modelValue":d[1]||(d[1]=l=>m.value=l),class:"w-full h-40 resize-none min-h-12 outline-none border border-solid border-gray-300 py-2.5 px-4 rounded focus:border-blue-600 focus:shadow-[0_0_0_3px_#4869ee3f]",required:""},null,512),[[w,m.value]]),n.value.message?(r(),c("span",$,a(n.value.message),1)):p("",!0)]),ee],32),e("div",se,[(r(!0),c(_,null,X(t(s).post.comments,l=>(r(),c("div",null,[e("div",te,[e("img",{class:"w-12 rounded-full",src:q,alt:`Commentaire ${l.id}`},null,8,ae),e("div",oe,[e("h4",le,a(l.name),1),e("span",null,a(t(S)(l.created_at)),1)])]),e("div",ne,a(l.message),1)]))),256))])])])])],64))}};export{me as default};
